<html>
	<head>
		<title>Developing a New Shape</title>
		<link rel="stylesheet" type="text/css" media="screen" href="../default.css" />
	</head>
	<body>
		<h1>Developping a New Shape</h1>
		
		<p>To create a new Shape you need to do the folowing steps:</p>
		
		<ol>
			<li>
				Create a new class that either implements the <span class="inline_code">IShape</span> interface or it extends one of the already existing base classes. For example <span class="inline_code">ShapeBase</span>.
				<pre class="code">class MyShape : ShapeBase
{
    ...
}</pre>
			</li>
			<li>
				<p>Override the <span class="inline_code">AllowToDraw</span> method. It is used by the <span class="inline_code">Draw</span> method to decide if the Shape has all the information necessary to be drawn.</p>
				<p>This is the <span class="inline_code">AllowToDraw</span> method of the <span class="inline_code">ImageAngularShape</span> class:</p>
				<pre class="code">protected override bool AllowToDraw()
{
    return base.AllowToDraw() && image != null;
}</pre>
			</li>
			<li>
				<p>Override the <span class="inline_code">DrawInternal</span> method. This is the method that actually draws the shape on the control. It is automatically called by the <span class="inline_code">Draw</span> method if it decides the Shape can be drawn.</p>
				
				<p>For example, <span class="inline_code">ImageAngularShape</span> class has the following <span class="inline_code">DrawInternal</span> method:</p>
				<pre class="code">protected override void DrawInternal(Graphics g)
{
    g.DrawImage(image, location.X, location.Y, image.Width, image.Height);
}</pre>
				<p class="note">When you create a new shape it should be drawn for a clock with diameter of 100px. The <span class="inline_code">AnalogClock</span> control will take care to scale it.</p>
			</li>
			<li>
				<p>If, in the drawing process, you use some objects that needs cleanup, you may want to overwrite the <span class="inline_code">Dispose</span> method, too.</p>
				<p>For example, if you use a <span class="inline_code">StringFormat</span> object, you should destroy it in the <span class="inline_code">Dispose</span> method like this:
				<pre class="code">protected override void Dispose(bool disposing)
{
	if (disposing)
	{
		if (stringFormat != null)
			stringFormat.Dispose();
	}
	
	base.Dispose(disposing);
}</pre>
				</p>
			</li>
		</ol>
		
		<div id="page_footer"></div>
	</body>
</html> 